{"ast":null,"code":"var _excluded = [\"a11yTitle\", \"background\", \"border\", \"disabled\", \"id\", \"plain\", \"renderFile\", \"maxSize\", \"messages\", \"margin\", \"multiple\", \"name\", \"onChange\", \"pad\", \"value\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useContext, useRef } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { CircleAlert } from 'grommet-icons/icons/CircleAlert';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { defaultProps } from '../../default-props';\nimport { disabledStyle, parseMetricToNum, useForwardedRef } from '../../utils';\nimport { Anchor } from '../Anchor';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { FormContext } from '../Form/FormContext';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { StyledFileInput } from './StyledFileInput';\nimport { FileInputPropTypes } from './propTypes';\n\nvar formatBytes = function formatBytes(size) {\n  var units = ['B', 'KB', 'MB', 'GB', 'TB'];\n  var factor = 1000;\n  var index = 0;\n  var num = size;\n\n  while (num >= factor && index < units.length - 1) {\n    num /= factor;\n    index += 1;\n  }\n\n  return num.toFixed(1) + \" \" + units[index];\n}; // We want the interaction of <input type=\"file\" /> but none of its styling.\n// So, we put what we want to show underneath and\n// position the <input /> on top with an opacity of zero.\n// If there are any files selected, we need to show the buttons to remove them.\n// So, we offset the <input /> from the right by the appropriate width.\n// We don't use Stack because of how we need to control the positioning.\n\n\nvar ContentsBox = styled(Box).withConfig({\n  displayName: \"FileInput__ContentsBox\",\n  componentId: \"sc-1jzq7im-0\"\n})([\"position:relative;\", \" \", \";\", \";\", \";\"], function (props) {\n  return props.disabled && disabledStyle();\n}, function (props) {\n  return props.theme.fileInput && props.theme.fileInput.extend;\n}, function (props) {\n  return props.hover && props.theme.fileInput && props.theme.fileInput.hover && props.theme.fileInput.hover.extend;\n}, function (props) {\n  return props.dragOver && props.theme.fileInput && props.theme.fileInput.dragOver && props.theme.fileInput.dragOver.extend;\n});\nvar Label = styled(Text).withConfig({\n  displayName: \"FileInput__Label\",\n  componentId: \"sc-1jzq7im-1\"\n})([\"\", \";\"], function (props) {\n  return props.theme.fileInput && props.theme.fileInput.label && props.theme.fileInput.label.extend;\n});\nvar Message = styled(Text).withConfig({\n  displayName: \"FileInput__Message\",\n  componentId: \"sc-1jzq7im-2\"\n})([\"\", \";\"], function (props) {\n  return props.theme.fileInput && props.theme.fileInput.message && props.theme.fileInput.message.extend;\n});\nvar FileInput = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n      background = _ref.background,\n      border = _ref.border,\n      disabled = _ref.disabled,\n      id = _ref.id,\n      plain = _ref.plain,\n      renderFile = _ref.renderFile,\n      maxSize = _ref.maxSize,\n      messages = _ref.messages,\n      margin = _ref.margin,\n      multiple = _ref.multiple,\n      name = _ref.name,\n      _onChange = _ref.onChange,\n      pad = _ref.pad,\n      valueProp = _ref.value,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext);\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var formContext = useContext(FormContext);\n\n  var _React$useState = React.useState(),\n      hover = _React$useState[0],\n      setHover = _React$useState[1];\n\n  var _React$useState2 = React.useState(),\n      dragOver = _React$useState2[0],\n      setDragOver = _React$useState2[1];\n\n  var aggregateThreshold = multiple && multiple.aggregateThreshold || 10;\n  var max = multiple == null ? void 0 : multiple.max;\n  var inputRef = useForwardedRef(ref);\n  var controlRef = useRef();\n  var removeRef = useRef();\n  var RemoveIcon = theme.fileInput.icons.remove;\n\n  var _formContext$useFormI = formContext.useFormInput({\n    name: name,\n    value: valueProp,\n    initialValue: [],\n    validate: [maxSize ? function () {\n      var fileList = [].concat(files);\n      var message = '';\n      var numOfInvalidFiles = fileList.filter(function (_ref2) {\n        var size = _ref2.size;\n        return size > maxSize;\n      }).length;\n\n      if (numOfInvalidFiles) {\n        var messageId = 'fileInput.maxSizeSingle';\n\n        if (multiple) {\n          messageId = \"fileInput.maxSizeMultiple.\" + (numOfInvalidFiles === 1 ? 'singular' : 'plural');\n        }\n\n        message = format({\n          id: messageId,\n          messages: messages,\n          values: {\n            maxSize: formatBytes(maxSize),\n            numOfFiles: numOfInvalidFiles\n          }\n        });\n      }\n\n      return message;\n    } : '', max ? function () {\n      var fileList = [].concat(files);\n      var message = '';\n\n      if (fileList.length > max) {\n        message = format({\n          id: 'fileInput.maxFile',\n          messages: messages,\n          values: {\n            max: max\n          }\n        });\n      }\n\n      return message;\n    } : '']\n  }),\n      files = _formContext$useFormI[0],\n      setFiles = _formContext$useFormI[1];\n\n  var mergeTheme = function mergeTheme(propertyName, defaultKey) {\n    var result = {};\n    var themeProp = theme.fileInput[propertyName];\n    if (themeProp) if (typeof themeProp !== 'object') {\n      if (defaultKey) result[defaultKey] = themeProp;else result = themeProp;\n    } else result = _extends({}, themeProp);\n    var hoverThemeProp = theme.fileInput.hover[propertyName];\n    if (hover && hoverThemeProp) if (typeof hoverThemeProp !== 'object') {\n      if (defaultKey) result[defaultKey] = hoverThemeProp;else result = hoverThemeProp;\n    } else result = _extends({}, result, hoverThemeProp);\n    var dragOverThemeProp = theme.fileInput.dragOver[propertyName];\n    if (dragOver && dragOverThemeProp) if (typeof dragOverThemeProp !== 'object') {\n      if (defaultKey) result[defaultKey] = dragOverThemeProp;else result = dragOverThemeProp;\n    } else result = _extends({}, result, dragOverThemeProp);\n    return typeof result === 'object' && Object.keys(result).length === 0 ? undefined : result;\n  };\n\n  var rightPad;\n\n  if (mergeTheme('pad')) {\n    var _mergeTheme = mergeTheme('pad'),\n        horizontal = _mergeTheme.horizontal,\n        right = _mergeTheme.right;\n\n    if (right) {\n      rightPad = theme.global.edgeSize[right] || right;\n    } else if (horizontal) {\n      rightPad = theme.global.edgeSize[horizontal] || horizontal;\n    }\n  } // rightPad needs to be included in the rightOffset\n  // otherwise input may cover the RemoveButton, making it\n  // unreachable by mouse click.\n  // If browse anchor or button is greater than remove button then\n  // rightoffset will take the larger width\n\n\n  var rightOffset;\n\n  if (removeRef.current && controlRef.current) {\n    var rightOffsetBrowse = controlRef.current.getBoundingClientRect().width;\n    var rightOffsetRemove = removeRef.current.getBoundingClientRect().width;\n    if (rightPad && typeof rightPad === 'string') rightOffset = rightOffsetRemove + parseMetricToNum(rightPad);\n\n    if (files.length === 1 || files.length > aggregateThreshold) {\n      rightOffset = rightOffsetBrowse + rightOffsetRemove + parseMetricToNum(theme.global.edgeSize.small) * 2;\n    } else if (rightOffsetBrowse > rightOffsetRemove) {\n      rightOffset = rightOffsetBrowse + parseMetricToNum(theme.global.edgeSize.small) * 2;\n    } else rightOffset = rightOffsetRemove;\n  } else if (!files.length && controlRef.current) {\n    rightOffset = controlRef.current.getBoundingClientRect().width + parseMetricToNum(theme.global.edgeSize.small) * 2;\n  } // Show the number of files when more than one\n\n\n  var message;\n\n  if (!files.length) {\n    message = format({\n      id: multiple ? 'fileInput.dropPromptMultiple' : 'fileInput.dropPrompt',\n      messages: messages\n    });\n  } else message = files.length + \" items\";\n\n  return /*#__PURE__*/React.createElement(ContentsBox, {\n    theme: theme,\n    flex: false,\n    disabled: disabled,\n    background: mergeTheme('background', 'color'),\n    border: !plain ? mergeTheme('border', 'side') : undefined,\n    margin: mergeTheme('margin'),\n    pad: mergeTheme('pad'),\n    round: mergeTheme('round', 'size'),\n    align: files.length ? 'stretch' : 'center',\n    justify: \"center\",\n    hover: hover,\n    onMouseOver: disabled ? undefined : function () {\n      return setHover(true);\n    },\n    onMouseOut: disabled ? undefined : function () {\n      return setHover(false);\n    },\n    dragOver: dragOver\n  }, (!files.length || files.length > 1) && /*#__PURE__*/React.createElement(Box, {\n    align: \"center\",\n    fill: \"horizontal\",\n    direction: \"row\",\n    justify: \"between\"\n  }, files.length <= aggregateThreshold && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Message, theme.fileInput.message, message), /*#__PURE__*/React.createElement(Keyboard, {\n    onSpace: function onSpace(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    },\n    onEnter: function onEnter(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    }\n  }, theme.fileInput.button ? /*#__PURE__*/React.createElement(Button, {\n    ref: controlRef,\n    kind: theme.fileInput.button,\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    }),\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    }\n  }) : /*#__PURE__*/React.createElement(Anchor, {\n    tabIndex: 0,\n    alignSelf: \"center\",\n    ref: controlRef,\n    margin: \"small\",\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    },\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    })\n  })))), files.length > aggregateThreshold && /*#__PURE__*/React.createElement(Box, {\n    justify: \"between\",\n    direction: \"row\",\n    align: \"center\"\n  }, /*#__PURE__*/React.createElement(Label, theme.fileInput.label, files.length, ' ', format({\n    id: 'fileInput.files',\n    messages: messages\n  })), /*#__PURE__*/React.createElement(Box, {\n    flex: false,\n    direction: \"row\",\n    align: \"center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    ref: removeRef,\n    a11yTitle: format({\n      id: 'fileInput.removeAll',\n      messages: messages\n    }),\n    icon: /*#__PURE__*/React.createElement(RemoveIcon, null),\n    hoverIndicator: true,\n    onClick: function onClick(event) {\n      event.stopPropagation();\n      if (_onChange) _onChange(event, {\n        files: []\n      });\n      setFiles([]);\n      inputRef.current.focus();\n    }\n  }), /*#__PURE__*/React.createElement(Keyboard, {\n    onSpace: function onSpace(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    },\n    onEnter: function onEnter(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    }\n  }, theme.fileInput.button ? /*#__PURE__*/React.createElement(Button, {\n    ref: controlRef,\n    kind: theme.fileInput.button,\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    }),\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    }\n  }) : /*#__PURE__*/React.createElement(Anchor, {\n    tabIndex: 0,\n    alignSelf: \"center\",\n    ref: controlRef,\n    margin: \"small\",\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    },\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    })\n  })))), files.length > 0 && files.length <= aggregateThreshold && files.map(function (file, index) {\n    return /*#__PURE__*/React.createElement(Box, {\n      key: file.name,\n      justify: \"between\",\n      direction: \"row\",\n      align: \"center\"\n    }, renderFile ? renderFile(file) : /*#__PURE__*/React.createElement(Box, _extends({}, theme.fileInput.label, {\n      gap: \"xsmall\",\n      align: \"center\",\n      direction: \"row\"\n    }), (maxSize && file.size > maxSize || max && index >= max) && /*#__PURE__*/React.createElement(CircleAlert, null), /*#__PURE__*/React.createElement(Label, {\n      weight: theme.global.input.weight || theme.global.input.font.weight,\n      truncate: true\n    }, file.name)), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      ref: index ? undefined : removeRef,\n      a11yTitle: format({\n        id: 'fileInput.remove',\n        messages: messages\n      }) + \" \" + file.name,\n      icon: /*#__PURE__*/React.createElement(RemoveIcon, null),\n      hoverIndicator: true,\n      onClick: function onClick(event) {\n        event.stopPropagation();\n        var nextFiles = [].concat(files);\n        nextFiles.splice(index, 1);\n        setFiles(nextFiles);\n        if (_onChange) _onChange(event, {\n          files: nextFiles\n        });\n        if (nextFiles.length === 0) inputRef.current.value = '';\n        inputRef.current.focus();\n      }\n    }), files.length === 1 && /*#__PURE__*/React.createElement(Keyboard, {\n      onSpace: function onSpace(event) {\n        if (controlRef.current === event.target) inputRef.current.click();\n      },\n      onEnter: function onEnter(event) {\n        if (controlRef.current === event.target) inputRef.current.click();\n      }\n    }, theme.fileInput.button ? /*#__PURE__*/React.createElement(Button, {\n      ref: controlRef,\n      kind: theme.fileInput.button,\n      label: format({\n        id: 'fileInput.browse',\n        messages: messages\n      }),\n      onClick: function onClick() {\n        inputRef.current.click();\n        inputRef.current.focus();\n      }\n    }) : /*#__PURE__*/React.createElement(Anchor, {\n      tabIndex: 0,\n      ref: controlRef,\n      margin: \"small\",\n      onClick: function onClick() {\n        inputRef.current.click();\n        inputRef.current.focus();\n      },\n      label: format({\n        id: 'fileInput.browse',\n        messages: messages\n      })\n    }))));\n  }), /*#__PURE__*/React.createElement(StyledFileInput, _extends({\n    ref: inputRef,\n    type: \"file\",\n    id: id,\n    name: name,\n    maxSize: maxSize,\n    multiple: multiple,\n    disabled: disabled,\n    plain: true,\n    rightOffset: rightOffset\n  }, rest, {\n    onDragOver: function onDragOver() {\n      return setDragOver(true);\n    },\n    onDragLeave: function onDragLeave() {\n      return setDragOver(false);\n    },\n    onChange: function onChange(event) {\n      event.persist();\n      var fileList = event.target.files;\n      var nextFiles = multiple ? [].concat(files) : [];\n\n      var _loop = function _loop(i) {\n        // avoid duplicates\n        var existing = nextFiles.filter(function (file) {\n          return file.name === fileList[i].name && file.size === fileList[i].size;\n        }).length > 0;\n\n        if (!existing) {\n          nextFiles.push(fileList[i]);\n        }\n      };\n\n      for (var i = 0; i < fileList.length; i += 1) {\n        _loop(i);\n      }\n\n      setFiles(nextFiles);\n      setDragOver(false);\n      if (_onChange) _onChange(event, {\n        files: nextFiles\n      });\n    }\n  })));\n});\nFileInput.defaultProps = {};\nObject.setPrototypeOf(FileInput.defaultProps, defaultProps);\nFileInput.displayName = 'FileInput';\nFileInput.propTypes = FileInputPropTypes;\nexport { FileInput };","map":{"version":3,"sources":["/Users/rachel/workout-generator/node_modules/grommet/es6/components/FileInput/FileInput.js"],"names":["_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useContext","useRef","styled","ThemeContext","CircleAlert","MessageContext","defaultProps","disabledStyle","parseMetricToNum","useForwardedRef","Anchor","Box","Button","FormContext","Keyboard","Text","StyledFileInput","FileInputPropTypes","formatBytes","size","units","factor","index","num","toFixed","ContentsBox","withConfig","displayName","componentId","props","disabled","theme","fileInput","extend","hover","dragOver","Label","label","Message","message","FileInput","_ref","ref","a11yTitle","background","border","id","plain","renderFile","maxSize","messages","margin","multiple","name","_onChange","onChange","pad","valueProp","value","rest","_useContext","format","formContext","_React$useState","useState","setHover","_React$useState2","setDragOver","aggregateThreshold","max","inputRef","controlRef","removeRef","RemoveIcon","icons","remove","_formContext$useFormI","useFormInput","initialValue","validate","fileList","concat","files","numOfInvalidFiles","filter","_ref2","messageId","values","numOfFiles","setFiles","mergeTheme","propertyName","defaultKey","result","themeProp","hoverThemeProp","dragOverThemeProp","undefined","rightPad","_mergeTheme","horizontal","right","global","edgeSize","rightOffset","current","rightOffsetBrowse","getBoundingClientRect","width","rightOffsetRemove","small","createElement","flex","round","align","justify","onMouseOver","onMouseOut","fill","direction","Fragment","onSpace","event","click","onEnter","button","kind","onClick","focus","tabIndex","alignSelf","icon","hoverIndicator","stopPropagation","map","file","gap","weight","input","font","truncate","nextFiles","splice","type","onDragOver","onDragLeave","persist","_loop","existing","push","setPrototypeOf","propTypes"],"mappings":"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","sourcesContent":["var _excluded = [\"a11yTitle\", \"background\", \"border\", \"disabled\", \"id\", \"plain\", \"renderFile\", \"maxSize\", \"messages\", \"margin\", \"multiple\", \"name\", \"onChange\", \"pad\", \"value\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useContext, useRef } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { CircleAlert } from 'grommet-icons/icons/CircleAlert';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { defaultProps } from '../../default-props';\nimport { disabledStyle, parseMetricToNum, useForwardedRef } from '../../utils';\nimport { Anchor } from '../Anchor';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { FormContext } from '../Form/FormContext';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { StyledFileInput } from './StyledFileInput';\nimport { FileInputPropTypes } from './propTypes';\n\nvar formatBytes = function formatBytes(size) {\n  var units = ['B', 'KB', 'MB', 'GB', 'TB'];\n  var factor = 1000;\n  var index = 0;\n  var num = size;\n\n  while (num >= factor && index < units.length - 1) {\n    num /= factor;\n    index += 1;\n  }\n\n  return num.toFixed(1) + \" \" + units[index];\n}; // We want the interaction of <input type=\"file\" /> but none of its styling.\n// So, we put what we want to show underneath and\n// position the <input /> on top with an opacity of zero.\n// If there are any files selected, we need to show the buttons to remove them.\n// So, we offset the <input /> from the right by the appropriate width.\n// We don't use Stack because of how we need to control the positioning.\n\n\nvar ContentsBox = styled(Box).withConfig({\n  displayName: \"FileInput__ContentsBox\",\n  componentId: \"sc-1jzq7im-0\"\n})([\"position:relative;\", \" \", \";\", \";\", \";\"], function (props) {\n  return props.disabled && disabledStyle();\n}, function (props) {\n  return props.theme.fileInput && props.theme.fileInput.extend;\n}, function (props) {\n  return props.hover && props.theme.fileInput && props.theme.fileInput.hover && props.theme.fileInput.hover.extend;\n}, function (props) {\n  return props.dragOver && props.theme.fileInput && props.theme.fileInput.dragOver && props.theme.fileInput.dragOver.extend;\n});\nvar Label = styled(Text).withConfig({\n  displayName: \"FileInput__Label\",\n  componentId: \"sc-1jzq7im-1\"\n})([\"\", \";\"], function (props) {\n  return props.theme.fileInput && props.theme.fileInput.label && props.theme.fileInput.label.extend;\n});\nvar Message = styled(Text).withConfig({\n  displayName: \"FileInput__Message\",\n  componentId: \"sc-1jzq7im-2\"\n})([\"\", \";\"], function (props) {\n  return props.theme.fileInput && props.theme.fileInput.message && props.theme.fileInput.message.extend;\n});\nvar FileInput = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var a11yTitle = _ref.a11yTitle,\n      background = _ref.background,\n      border = _ref.border,\n      disabled = _ref.disabled,\n      id = _ref.id,\n      plain = _ref.plain,\n      renderFile = _ref.renderFile,\n      maxSize = _ref.maxSize,\n      messages = _ref.messages,\n      margin = _ref.margin,\n      multiple = _ref.multiple,\n      name = _ref.name,\n      _onChange = _ref.onChange,\n      pad = _ref.pad,\n      valueProp = _ref.value,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext);\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format;\n\n  var formContext = useContext(FormContext);\n\n  var _React$useState = React.useState(),\n      hover = _React$useState[0],\n      setHover = _React$useState[1];\n\n  var _React$useState2 = React.useState(),\n      dragOver = _React$useState2[0],\n      setDragOver = _React$useState2[1];\n\n  var aggregateThreshold = multiple && multiple.aggregateThreshold || 10;\n  var max = multiple == null ? void 0 : multiple.max;\n  var inputRef = useForwardedRef(ref);\n  var controlRef = useRef();\n  var removeRef = useRef();\n  var RemoveIcon = theme.fileInput.icons.remove;\n\n  var _formContext$useFormI = formContext.useFormInput({\n    name: name,\n    value: valueProp,\n    initialValue: [],\n    validate: [maxSize ? function () {\n      var fileList = [].concat(files);\n      var message = '';\n      var numOfInvalidFiles = fileList.filter(function (_ref2) {\n        var size = _ref2.size;\n        return size > maxSize;\n      }).length;\n\n      if (numOfInvalidFiles) {\n        var messageId = 'fileInput.maxSizeSingle';\n\n        if (multiple) {\n          messageId = \"fileInput.maxSizeMultiple.\" + (numOfInvalidFiles === 1 ? 'singular' : 'plural');\n        }\n\n        message = format({\n          id: messageId,\n          messages: messages,\n          values: {\n            maxSize: formatBytes(maxSize),\n            numOfFiles: numOfInvalidFiles\n          }\n        });\n      }\n\n      return message;\n    } : '', max ? function () {\n      var fileList = [].concat(files);\n      var message = '';\n\n      if (fileList.length > max) {\n        message = format({\n          id: 'fileInput.maxFile',\n          messages: messages,\n          values: {\n            max: max\n          }\n        });\n      }\n\n      return message;\n    } : '']\n  }),\n      files = _formContext$useFormI[0],\n      setFiles = _formContext$useFormI[1];\n\n  var mergeTheme = function mergeTheme(propertyName, defaultKey) {\n    var result = {};\n    var themeProp = theme.fileInput[propertyName];\n    if (themeProp) if (typeof themeProp !== 'object') {\n      if (defaultKey) result[defaultKey] = themeProp;else result = themeProp;\n    } else result = _extends({}, themeProp);\n    var hoverThemeProp = theme.fileInput.hover[propertyName];\n    if (hover && hoverThemeProp) if (typeof hoverThemeProp !== 'object') {\n      if (defaultKey) result[defaultKey] = hoverThemeProp;else result = hoverThemeProp;\n    } else result = _extends({}, result, hoverThemeProp);\n    var dragOverThemeProp = theme.fileInput.dragOver[propertyName];\n    if (dragOver && dragOverThemeProp) if (typeof dragOverThemeProp !== 'object') {\n      if (defaultKey) result[defaultKey] = dragOverThemeProp;else result = dragOverThemeProp;\n    } else result = _extends({}, result, dragOverThemeProp);\n    return typeof result === 'object' && Object.keys(result).length === 0 ? undefined : result;\n  };\n\n  var rightPad;\n\n  if (mergeTheme('pad')) {\n    var _mergeTheme = mergeTheme('pad'),\n        horizontal = _mergeTheme.horizontal,\n        right = _mergeTheme.right;\n\n    if (right) {\n      rightPad = theme.global.edgeSize[right] || right;\n    } else if (horizontal) {\n      rightPad = theme.global.edgeSize[horizontal] || horizontal;\n    }\n  } // rightPad needs to be included in the rightOffset\n  // otherwise input may cover the RemoveButton, making it\n  // unreachable by mouse click.\n  // If browse anchor or button is greater than remove button then\n  // rightoffset will take the larger width\n\n\n  var rightOffset;\n\n  if (removeRef.current && controlRef.current) {\n    var rightOffsetBrowse = controlRef.current.getBoundingClientRect().width;\n    var rightOffsetRemove = removeRef.current.getBoundingClientRect().width;\n    if (rightPad && typeof rightPad === 'string') rightOffset = rightOffsetRemove + parseMetricToNum(rightPad);\n\n    if (files.length === 1 || files.length > aggregateThreshold) {\n      rightOffset = rightOffsetBrowse + rightOffsetRemove + parseMetricToNum(theme.global.edgeSize.small) * 2;\n    } else if (rightOffsetBrowse > rightOffsetRemove) {\n      rightOffset = rightOffsetBrowse + parseMetricToNum(theme.global.edgeSize.small) * 2;\n    } else rightOffset = rightOffsetRemove;\n  } else if (!files.length && controlRef.current) {\n    rightOffset = controlRef.current.getBoundingClientRect().width + parseMetricToNum(theme.global.edgeSize.small) * 2;\n  } // Show the number of files when more than one\n\n\n  var message;\n\n  if (!files.length) {\n    message = format({\n      id: multiple ? 'fileInput.dropPromptMultiple' : 'fileInput.dropPrompt',\n      messages: messages\n    });\n  } else message = files.length + \" items\";\n\n  return /*#__PURE__*/React.createElement(ContentsBox, {\n    theme: theme,\n    flex: false,\n    disabled: disabled,\n    background: mergeTheme('background', 'color'),\n    border: !plain ? mergeTheme('border', 'side') : undefined,\n    margin: mergeTheme('margin'),\n    pad: mergeTheme('pad'),\n    round: mergeTheme('round', 'size'),\n    align: files.length ? 'stretch' : 'center',\n    justify: \"center\",\n    hover: hover,\n    onMouseOver: disabled ? undefined : function () {\n      return setHover(true);\n    },\n    onMouseOut: disabled ? undefined : function () {\n      return setHover(false);\n    },\n    dragOver: dragOver\n  }, (!files.length || files.length > 1) && /*#__PURE__*/React.createElement(Box, {\n    align: \"center\",\n    fill: \"horizontal\",\n    direction: \"row\",\n    justify: \"between\"\n  }, files.length <= aggregateThreshold && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Message, theme.fileInput.message, message), /*#__PURE__*/React.createElement(Keyboard, {\n    onSpace: function onSpace(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    },\n    onEnter: function onEnter(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    }\n  }, theme.fileInput.button ? /*#__PURE__*/React.createElement(Button, {\n    ref: controlRef,\n    kind: theme.fileInput.button,\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    }),\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    }\n  }) : /*#__PURE__*/React.createElement(Anchor, {\n    tabIndex: 0,\n    alignSelf: \"center\",\n    ref: controlRef,\n    margin: \"small\",\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    },\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    })\n  })))), files.length > aggregateThreshold && /*#__PURE__*/React.createElement(Box, {\n    justify: \"between\",\n    direction: \"row\",\n    align: \"center\"\n  }, /*#__PURE__*/React.createElement(Label, theme.fileInput.label, files.length, ' ', format({\n    id: 'fileInput.files',\n    messages: messages\n  })), /*#__PURE__*/React.createElement(Box, {\n    flex: false,\n    direction: \"row\",\n    align: \"center\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    ref: removeRef,\n    a11yTitle: format({\n      id: 'fileInput.removeAll',\n      messages: messages\n    }),\n    icon: /*#__PURE__*/React.createElement(RemoveIcon, null),\n    hoverIndicator: true,\n    onClick: function onClick(event) {\n      event.stopPropagation();\n      if (_onChange) _onChange(event, {\n        files: []\n      });\n      setFiles([]);\n      inputRef.current.focus();\n    }\n  }), /*#__PURE__*/React.createElement(Keyboard, {\n    onSpace: function onSpace(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    },\n    onEnter: function onEnter(event) {\n      if (controlRef.current === event.target) inputRef.current.click();\n    }\n  }, theme.fileInput.button ? /*#__PURE__*/React.createElement(Button, {\n    ref: controlRef,\n    kind: theme.fileInput.button,\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    }),\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    }\n  }) : /*#__PURE__*/React.createElement(Anchor, {\n    tabIndex: 0,\n    alignSelf: \"center\",\n    ref: controlRef,\n    margin: \"small\",\n    onClick: function onClick() {\n      inputRef.current.click();\n      inputRef.current.focus();\n    },\n    label: format({\n      id: 'fileInput.browse',\n      messages: messages\n    })\n  })))), files.length > 0 && files.length <= aggregateThreshold && files.map(function (file, index) {\n    return /*#__PURE__*/React.createElement(Box, {\n      key: file.name,\n      justify: \"between\",\n      direction: \"row\",\n      align: \"center\"\n    }, renderFile ? renderFile(file) : /*#__PURE__*/React.createElement(Box, _extends({}, theme.fileInput.label, {\n      gap: \"xsmall\",\n      align: \"center\",\n      direction: \"row\"\n    }), (maxSize && file.size > maxSize || max && index >= max) && /*#__PURE__*/React.createElement(CircleAlert, null), /*#__PURE__*/React.createElement(Label, {\n      weight: theme.global.input.weight || theme.global.input.font.weight,\n      truncate: true\n    }, file.name)), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      ref: index ? undefined : removeRef,\n      a11yTitle: format({\n        id: 'fileInput.remove',\n        messages: messages\n      }) + \" \" + file.name,\n      icon: /*#__PURE__*/React.createElement(RemoveIcon, null),\n      hoverIndicator: true,\n      onClick: function onClick(event) {\n        event.stopPropagation();\n        var nextFiles = [].concat(files);\n        nextFiles.splice(index, 1);\n        setFiles(nextFiles);\n        if (_onChange) _onChange(event, {\n          files: nextFiles\n        });\n        if (nextFiles.length === 0) inputRef.current.value = '';\n        inputRef.current.focus();\n      }\n    }), files.length === 1 && /*#__PURE__*/React.createElement(Keyboard, {\n      onSpace: function onSpace(event) {\n        if (controlRef.current === event.target) inputRef.current.click();\n      },\n      onEnter: function onEnter(event) {\n        if (controlRef.current === event.target) inputRef.current.click();\n      }\n    }, theme.fileInput.button ? /*#__PURE__*/React.createElement(Button, {\n      ref: controlRef,\n      kind: theme.fileInput.button,\n      label: format({\n        id: 'fileInput.browse',\n        messages: messages\n      }),\n      onClick: function onClick() {\n        inputRef.current.click();\n        inputRef.current.focus();\n      }\n    }) : /*#__PURE__*/React.createElement(Anchor, {\n      tabIndex: 0,\n      ref: controlRef,\n      margin: \"small\",\n      onClick: function onClick() {\n        inputRef.current.click();\n        inputRef.current.focus();\n      },\n      label: format({\n        id: 'fileInput.browse',\n        messages: messages\n      })\n    }))));\n  }), /*#__PURE__*/React.createElement(StyledFileInput, _extends({\n    ref: inputRef,\n    type: \"file\",\n    id: id,\n    name: name,\n    maxSize: maxSize,\n    multiple: multiple,\n    disabled: disabled,\n    plain: true,\n    rightOffset: rightOffset\n  }, rest, {\n    onDragOver: function onDragOver() {\n      return setDragOver(true);\n    },\n    onDragLeave: function onDragLeave() {\n      return setDragOver(false);\n    },\n    onChange: function onChange(event) {\n      event.persist();\n      var fileList = event.target.files;\n      var nextFiles = multiple ? [].concat(files) : [];\n\n      var _loop = function _loop(i) {\n        // avoid duplicates\n        var existing = nextFiles.filter(function (file) {\n          return file.name === fileList[i].name && file.size === fileList[i].size;\n        }).length > 0;\n\n        if (!existing) {\n          nextFiles.push(fileList[i]);\n        }\n      };\n\n      for (var i = 0; i < fileList.length; i += 1) {\n        _loop(i);\n      }\n\n      setFiles(nextFiles);\n      setDragOver(false);\n      if (_onChange) _onChange(event, {\n        files: nextFiles\n      });\n    }\n  })));\n});\nFileInput.defaultProps = {};\nObject.setPrototypeOf(FileInput.defaultProps, defaultProps);\nFileInput.displayName = 'FileInput';\nFileInput.propTypes = FileInputPropTypes;\nexport { FileInput };"]},"metadata":{},"sourceType":"module"}