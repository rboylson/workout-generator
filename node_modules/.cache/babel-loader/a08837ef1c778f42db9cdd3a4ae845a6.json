{"ast":null,"code":"var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useRef, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, formatToLocalYYYYMMDD, localTimezoneToUTC, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { CalendarPropTypes } from './propTypes';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\nvar activeDates = {\n  start: 'start',\n  end: 'end'\n};\nvar timeStamp = new RegExp(/T.*/);\n\nvar formatSelectedDatesString = function formatSelectedDatesString(date) {\n  return \"Currently selected \\n  \" + (date == null ? void 0 : date.map(function (item) {\n    var dates;\n\n    if (!Array.isArray(item)) {\n      dates = formatToLocalYYYYMMDD(item) + \" \";\n    } else {\n      var start = item[0] !== undefined ? formatToLocalYYYYMMDD(item[0]) : 'none';\n      var end = item[1] !== undefined ? formatToLocalYYYYMMDD(item[1]) : 'none';\n      dates = start + \" through \" + end;\n    }\n\n    return dates;\n  }));\n};\n\nvar getAccessibilityString = function getAccessibilityString(date, dates) {\n  if (date && !Array.isArray(date)) {\n    return \"Currently selected \" + formatToLocalYYYYMMDD(date) + \";\";\n  }\n\n  if (date && Array.isArray(date)) {\n    return formatSelectedDatesString(date);\n  }\n\n  if (dates != null && dates.length) {\n    return formatSelectedDatesString(dates);\n  }\n\n  return 'No date selected';\n};\n\nvar normalizeForTimezone = function normalizeForTimezone(date, refDate) {\n  if (!date) return undefined;\n  return (!timeStamp.test(refDate || date) ? localTimezoneToUTC(new Date(date)) : new Date(date)).toISOString();\n};\n\nvar normalizeReference = function normalizeReference(reference, date, dates) {\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    if (typeof date === 'string') {\n      normalizedReference = new Date(date);\n    } else if (Array.isArray(date)) {\n      if (typeof date[0] === 'string') {\n        normalizedReference = new Date(date[0]);\n      } else if (Array.isArray(date[0])) {\n        normalizedReference = new Date(date[0][0] ? date[0][0] : date[0][1]);\n      } else {\n        normalizedReference = new Date();\n        normalizedReference.setHours(0, 0, 0, 0);\n      }\n    }\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0] ? dates[0][0] : dates[0][1]);\n    } else {\n      normalizedReference = new Date();\n      normalizedReference.setHours(0, 0, 0, 0);\n    }\n  } else {\n    normalizedReference = new Date();\n    normalizedReference.setHours(0, 0, 0, 0);\n  }\n\n  return normalizedReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nvar millisecondsPerYear = 31557600000;\n\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\n\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n      fill = _ref.fill,\n      size = _ref.size,\n      isInRange = _ref.isInRange,\n      isSelected = _ref.isSelected,\n      otherMonth = _ref.otherMonth,\n      _ref$buttonProps = _ref.buttonProps,\n      buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    disabledProp: buttonProps.disabled,\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\n\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n      fill = _ref2.fill,\n      size = _ref2.size,\n      buttonProps = _ref2.buttonProps;\n\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\n\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var activeDateProp = _ref3.activeDate,\n      _ref3$animate = _ref3.animate,\n      animate = _ref3$animate === void 0 ? true : _ref3$animate,\n      boundsProp = _ref3.bounds,\n      children = _ref3.children,\n      dateProp = _ref3.date,\n      datesProp = _ref3.dates,\n      daysOfWeek = _ref3.daysOfWeek,\n      disabled = _ref3.disabled,\n      initialFocus = _ref3.initialFocus,\n      fill = _ref3.fill,\n      _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n      firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n      header = _ref3.header,\n      _ref3$locale = _ref3.locale,\n      locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n      messages = _ref3.messages,\n      onReference = _ref3.onReference,\n      onSelect = _ref3.onSelect,\n      range = _ref3.range,\n      referenceProp = _ref3.reference,\n      _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n      showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n      _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var announce = useContext(AnnounceContext);\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format; // set activeDate when caller changes it, allows us to change\n  // it internally too\n\n\n  var _useState = useState(dateProp && typeof dateProp === 'string' && range ? activeDates.end : activeDates.start),\n      activeDate = _useState[0],\n      setActiveDate = _useState[1];\n\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]); // function that runs inside the useEffect for date and dates\n\n  var normalizeDate = function normalizeDate(dateValue) {\n    // convert values to UTC based on if date is string or array\n    if (typeof dateValue === 'string') {\n      return normalizeForTimezone(dateValue);\n    }\n\n    if (Array.isArray(dateValue)) {\n      if (Array.isArray(dateValue[0])) {\n        var from;\n        var to;\n\n        var _dateValue$0$map = dateValue[0].map(function (day) {\n          return day ? new Date(day) : undefined;\n        });\n\n        from = _dateValue$0$map[0];\n        to = _dateValue$0$map[1];\n        if (from) from = normalizeForTimezone(from, dateValue[0][0]);\n        if (to) to = normalizeForTimezone(to, dateValue[0][0]);\n        return [[from, to]];\n      }\n\n      var dateArray = [];\n      dateValue.forEach(function (d) {\n        if (Array.isArray(d)) {\n          var _from;\n\n          var _to;\n\n          var _d$map = d.map(function (day) {\n            return new Date(day);\n          });\n\n          _from = _d$map[0];\n          _to = _d$map[1];\n          _from = normalizeForTimezone(_from, d[0]);\n          _to = normalizeForTimezone(_to, d[0]);\n          dateArray.push([_from, _to]);\n        } else {\n          dateArray.push(normalizeForTimezone(d));\n        }\n      });\n      return dateArray;\n    }\n\n    return undefined;\n  }; // set date when caller changes it, allows us to change it internally too\n\n\n  var _useState2 = useState(dateProp),\n      date = _useState2[0],\n      setDate = _useState2[1];\n\n  useEffect(function () {\n    setDate(normalizeDate(dateProp));\n  }, [dateProp]); // set dates when caller changes it, allows us to change it internally too\n\n  var _useState3 = useState(datesProp),\n      dates = _useState3[0],\n      setDates = _useState3[1];\n\n  useEffect(function () {\n    setDates(normalizeDate(datesProp));\n  }, [datesProp]); // set reference based on what the caller passed or date/dates.\n\n  var _useState4 = useState(normalizeReference(referenceProp, date, dates)),\n      reference = _useState4[0],\n      setReference = _useState4[1];\n\n  useEffect(function () {\n    return setReference(normalizeReference(referenceProp, dateProp, datesProp));\n  }, [dateProp, datesProp, referenceProp]); // normalize bounds\n\n  var _useState5 = useState(boundsProp ? boundsProp.map(function (b) {\n    return normalizeForTimezone(b);\n  }) : undefined),\n      bounds = _useState5[0],\n      setBounds = _useState5[1];\n\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp.map(function (b) {\n      return normalizeForTimezone(b);\n    }));else setBounds(undefined);\n  }, [boundsProp]); // calculate the bounds we display based on the reference\n\n  var _useState6 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState6[0],\n      setDisplayBounds = _useState6[1];\n\n  var _useState7 = useState(),\n      targetDisplayBounds = _useState7[0],\n      setTargetDisplayBounds = _useState7[1];\n\n  var _useState8 = useState(),\n      slide = _useState8[0],\n      setSlide = _useState8[1];\n\n  var _useState9 = useState(),\n      animating = _useState9[0],\n      setAnimating = _useState9[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek); // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear) {\n          setDisplayBounds([targetDisplayBounds[0], displayBounds[1]]);\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear) {\n          setDisplayBounds([displayBounds[0], targetDisplayBounds[1]]);\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n\n      return undefined;\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]); // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [animating, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n\n  var _useState10 = useState(),\n      focus = _useState10[0],\n      setFocus = _useState10[1];\n\n  var _useState11 = useState(),\n      active = _useState11[0],\n      setActive = _useState11[1];\n\n  useEffect(function () {\n    if (initialFocus === 'days') daysRef.current.focus();\n  }, [initialFocus]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, bounds]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextDates;\n    var nextDate; // output date with no timestamp if that's how user provided it\n\n    var adjustedDate;\n\n    if (!range) {\n      nextDate = selectedDate;\n\n      if (datesProp) {\n        datesProp.forEach(function (d) {\n          if (!timeStamp.test(d)) {\n            adjustedDate = formatToLocalYYYYMMDD(nextDate);\n\n            if (d === adjustedDate) {\n              nextDate = undefined;\n            } else {\n              adjustedDate = undefined;\n            }\n          }\n        });\n      } else if (typeof dateProp === 'string') {\n        if (!timeStamp.test(dateProp)) {\n          adjustedDate = formatToLocalYYYYMMDD(selectedDate);\n\n          if (dateProp === adjustedDate) {\n            nextDate = undefined;\n          } else {\n            adjustedDate = undefined;\n          }\n        }\n      } else if (Array.isArray(dateProp)) {\n        dateProp.forEach(function (d) {\n          if (!timeStamp.test(d)) {\n            adjustedDate = formatToLocalYYYYMMDD(nextDate);\n\n            if (d === adjustedDate) {\n              nextDate = undefined;\n            } else {\n              adjustedDate = undefined;\n            }\n          }\n        });\n      } else {\n        adjustedDate = undefined;\n      }\n    } // everything down is a range\n    else if (!dates && !Array.isArray(date)) {\n      // if user supplies date, convert this into dates\n      if (date) {\n        var priorDate = new Date(date);\n        var selDate = new Date(selectedDate);\n\n        if (activeDate === activeDates.start) {\n          if (selDate.getTime() > priorDate.getTime()) {\n            nextDates = [[selectedDate, undefined]];\n          } else {\n            nextDates = [[selectedDate, date]];\n          }\n\n          setActiveDate(activeDates.end);\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } else if (activeDate === activeDates.end) {\n          if (selDate.getTime() < priorDate.getTime()) {\n            nextDates = [[selectedDate, undefined]];\n            setActiveDate(activeDates.end);\n          } else {\n            nextDates = [[date, selectedDate]];\n            setActiveDate(activeDates.start);\n          }\n\n          if (activeDateProp) setActiveDate(activeDateProp);\n        }\n      } else if (activeDate === activeDates.start) {\n        nextDates = [[selectedDate, undefined]];\n        setActiveDate(activeDates.end);\n      } else if (activeDate === activeDates.end) {\n        nextDates = [[undefined, selectedDate]];\n      }\n\n      if (activeDateProp) setActiveDate(activeDateProp);\n    } else if (dates || date) {\n      var handleSelection = function handleSelection(dateValue) {\n        var priorDates = dateValue[0].map(function (d) {\n          return new Date(d);\n        });\n        var selDate = new Date(selectedDate);\n\n        if (selDate.getTime() === priorDates[0].getTime()) {\n          nextDates = [[undefined, dateValue[0][1]]];\n          setActiveDate(activeDates.start);\n        } else if (selDate.getTime() === priorDates[1].getTime()) {\n          nextDates = [[dateValue[0][0], undefined]];\n          setActiveDate(activeDates.end);\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } else if (activeDate === activeDates.start) {\n          if (selDate.getTime() > priorDates[1].getTime()) {\n            nextDates = [[selectedDate, undefined]];\n          } else {\n            nextDates = [[selectedDate, dateValue[0][1]]];\n          }\n\n          setActiveDate(activeDates.end);\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } else if (activeDate === activeDates.end) {\n          if (selDate.getTime() < priorDates[0].getTime()) {\n            nextDates = [[selectedDate, undefined]];\n            setActiveDate(activeDates.end);\n          } else {\n            nextDates = [[dateValue[0][0], selectedDate]];\n            setActiveDate(activeDates.start);\n          }\n\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } // cleanup\n\n\n        if (!nextDates[0][0] && !nextDates[0][1]) nextDates = undefined;\n      }; // have dates\n\n\n      if (dates) {\n        handleSelection(dates);\n      } else if (date && Array.isArray(date)) {\n        handleSelection(date);\n      }\n    }\n\n    setDates(nextDates);\n\n    if (date && typeof date === 'string') {\n      setDate(nextDate);\n    } else if (date && Array.isArray(date)) {\n      setDate(nextDates);\n    }\n\n    setActive(new Date(selectedDate));\n\n    if (onSelect) {\n      var adjustedDates;\n\n      if (nextDates && Array.isArray(nextDates[0]) && (!nextDates[0][0] || !nextDates[0][1]) && range === true) {\n        // return string for backwards compatibility\n        var _nextDates$0$filter = nextDates[0].filter(function (d) {\n          return d;\n        });\n\n        adjustedDates = _nextDates$0$filter[0];\n      } else {\n        adjustedDates = nextDates;\n      }\n\n      onSelect(adjustedDates || adjustedDate || nextDate);\n    }\n  }, [activeDate, activeDateProp, date, dateProp, dates, datesProp, onSelect, range]);\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: previousMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, bounds),\n      onClick: function onClick() {\n        changeReference(previousMonth);\n        announce(format({\n          id: 'calendar.previous',\n          messages: messages,\n          values: {\n            date: previousMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: nextMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, bounds),\n      onClick: function onClick() {\n        changeReference(nextMonth);\n        announce(format({\n          id: 'calendar.next',\n          messages: messages,\n          values: {\n            date: nextMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      (function () {\n        var dateString = day.toISOString(); // this.dayRefs[dateString] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || bounds && !betweenDates(day, bounds);\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateString;\n        }\n\n        if (!children) {\n          days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n            key: day.getTime(),\n            buttonProps: {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString);\n                announce(\"Selected \" + formatToLocalYYYYMMDD(dateString), 'assertive'); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            },\n            isInRange: inRange,\n            isSelected: selected,\n            otherMonth: day.getMonth() !== reference.getMonth(),\n            size: size,\n            fill: fill\n          }, day.getDate()));\n        } else {\n          days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n            key: day.getTime(),\n            buttonProps: onSelect ? {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString);\n                announce(\"Selected \\n                          \" + formatToLocalYYYYMMDD(dateString), 'assertive'); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            } : null,\n            size: size,\n            fill: fill\n          }, children({\n            date: day,\n            day: day.getDate(),\n            isInRange: inRange,\n            isSelected: selected\n          })));\n        }\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return active !== undefined ? selectDate(active.toISOString()) : undefined;\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n\n      if (!betweenDates(addDays(active, -7), displayBounds)) {\n        changeReference(addDays(active, -7));\n      }\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n\n      if (!betweenDates(addDays(active, 7), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onLeft: function onLeft() {\n      setActive(addDays(active, -1));\n\n      if (!betweenDates(addDays(active, -1), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onRight: function onRight() {\n      setActive(addDays(active, 1));\n\n      if (!betweenDates(addDays(active, 2), displayBounds)) {\n        changeReference(active);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    tabIndex: 0,\n    role: \"grid\",\n    \"aria-label\": \"\\n                \" + reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \";\\n                \" + getAccessibilityString(date, dates) + \"\\n              \",\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n\n      if (date && betweenDates(new Date(date), displayBounds)) {\n        setActive(new Date(date));\n      } else {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };","map":{"version":3,"sources":["/Users/rachel/workout-generator/node_modules/grommet/es6/components/Calendar/Calendar.js"],"names":["_excluded","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useMemo","useRef","useState","useEffect","ThemeContext","defaultProps","AnnounceContext","MessageContext","Box","Button","Heading","Keyboard","StyledCalendar","StyledDay","StyledDayContainer","StyledWeek","StyledWeeks","StyledWeeksContainer","addDays","addMonths","betweenDates","daysApart","endOfMonth","formatToLocalYYYYMMDD","localTimezoneToUTC","startOfMonth","subtractDays","subtractMonths","withinDates","CalendarPropTypes","headingPadMap","small","medium","large","activeDates","start","end","timeStamp","RegExp","formatSelectedDatesString","date","map","item","dates","Array","isArray","undefined","getAccessibilityString","normalizeForTimezone","refDate","test","Date","toISOString","normalizeReference","reference","normalizedReference","setHours","buildDisplayBounds","firstDayOfWeek","setDate","getDay","millisecondsPerYear","CalendarDayButton","props","createElement","tabIndex","plain","CalendarDay","_ref","children","fill","size","isInRange","isSelected","otherMonth","_ref$buttonProps","buttonProps","role","sizeProp","fillContainer","disabledProp","disabled","inRange","CalendarCustomDay","_ref2","Calendar","_ref3","ref","activeDateProp","activeDate","_ref3$animate","animate","boundsProp","bounds","dateProp","datesProp","daysOfWeek","initialFocus","_ref3$firstDayOfWeek","header","_ref3$locale","locale","messages","onReference","onSelect","range","referenceProp","_ref3$showAdjacentDay","showAdjacentDays","_ref3$size","rest","theme","announce","_useContext","format","_useState","setActiveDate","normalizeDate","dateValue","from","to","_dateValue$0$map","day","dateArray","forEach","d","_from","_to","_d$map","push","_useState2","_useState3","setDates","_useState4","setReference","_useState5","b","setBounds","_useState6","displayBounds","setDisplayBounds","_useState7","targetDisplayBounds","setTargetDisplayBounds","_useState8","slide","setSlide","_useState9","animating","setAnimating","nextDisplayBounds","getTime","diffBoundsAboveYear","direction","weeks","timer","setTimeout","clearTimeout","previousMonth","nextMonth","daysRef","_useState10","focus","setFocus","_useState11","active","setActive","current","changeReference","nextReference","selectDate","selectedDate","nextDates","nextDate","adjustedDate","priorDate","selDate","handleSelection","priorDates","adjustedDates","_nextDates$0$filter","filter","renderCalendarHeader","PreviousIcon","calendar","icons","previous","NextIcon","next","justify","align","flex","pad","horizontal","level","heading","margin","toLocaleDateString","month","year","a11yTitle","icon","onClick","id","values","renderDaysOfWeek","days","weekday","firstDayInMonth","blankWeek","getMonth","getDate","dateString","selected","selectedState","dayDisabled","toDateString","onMouseOver","onMouseOut","onPreviousMonth","onNextMonth","previousInBound","nextInBound","onEnter","onUp","event","preventDefault","stopPropagation","onDown","onLeft","onRight","onFocus","onBlur","displayName","propTypes"],"mappings":"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","sourcesContent":["var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useRef, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, formatToLocalYYYYMMDD, localTimezoneToUTC, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { CalendarPropTypes } from './propTypes';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\nvar activeDates = {\n  start: 'start',\n  end: 'end'\n};\nvar timeStamp = new RegExp(/T.*/);\n\nvar formatSelectedDatesString = function formatSelectedDatesString(date) {\n  return \"Currently selected \\n  \" + (date == null ? void 0 : date.map(function (item) {\n    var dates;\n\n    if (!Array.isArray(item)) {\n      dates = formatToLocalYYYYMMDD(item) + \" \";\n    } else {\n      var start = item[0] !== undefined ? formatToLocalYYYYMMDD(item[0]) : 'none';\n      var end = item[1] !== undefined ? formatToLocalYYYYMMDD(item[1]) : 'none';\n      dates = start + \" through \" + end;\n    }\n\n    return dates;\n  }));\n};\n\nvar getAccessibilityString = function getAccessibilityString(date, dates) {\n  if (date && !Array.isArray(date)) {\n    return \"Currently selected \" + formatToLocalYYYYMMDD(date) + \";\";\n  }\n\n  if (date && Array.isArray(date)) {\n    return formatSelectedDatesString(date);\n  }\n\n  if (dates != null && dates.length) {\n    return formatSelectedDatesString(dates);\n  }\n\n  return 'No date selected';\n};\n\nvar normalizeForTimezone = function normalizeForTimezone(date, refDate) {\n  if (!date) return undefined;\n  return (!timeStamp.test(refDate || date) ? localTimezoneToUTC(new Date(date)) : new Date(date)).toISOString();\n};\n\nvar normalizeReference = function normalizeReference(reference, date, dates) {\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    if (typeof date === 'string') {\n      normalizedReference = new Date(date);\n    } else if (Array.isArray(date)) {\n      if (typeof date[0] === 'string') {\n        normalizedReference = new Date(date[0]);\n      } else if (Array.isArray(date[0])) {\n        normalizedReference = new Date(date[0][0] ? date[0][0] : date[0][1]);\n      } else {\n        normalizedReference = new Date();\n        normalizedReference.setHours(0, 0, 0, 0);\n      }\n    }\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0] ? dates[0][0] : dates[0][1]);\n    } else {\n      normalizedReference = new Date();\n      normalizedReference.setHours(0, 0, 0, 0);\n    }\n  } else {\n    normalizedReference = new Date();\n    normalizedReference.setHours(0, 0, 0, 0);\n  }\n\n  return normalizedReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nvar millisecondsPerYear = 31557600000;\n\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\n\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n      fill = _ref.fill,\n      size = _ref.size,\n      isInRange = _ref.isInRange,\n      isSelected = _ref.isSelected,\n      otherMonth = _ref.otherMonth,\n      _ref$buttonProps = _ref.buttonProps,\n      buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    disabledProp: buttonProps.disabled,\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\n\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n      fill = _ref2.fill,\n      size = _ref2.size,\n      buttonProps = _ref2.buttonProps;\n\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\n\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var activeDateProp = _ref3.activeDate,\n      _ref3$animate = _ref3.animate,\n      animate = _ref3$animate === void 0 ? true : _ref3$animate,\n      boundsProp = _ref3.bounds,\n      children = _ref3.children,\n      dateProp = _ref3.date,\n      datesProp = _ref3.dates,\n      daysOfWeek = _ref3.daysOfWeek,\n      disabled = _ref3.disabled,\n      initialFocus = _ref3.initialFocus,\n      fill = _ref3.fill,\n      _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n      firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n      header = _ref3.header,\n      _ref3$locale = _ref3.locale,\n      locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n      messages = _ref3.messages,\n      onReference = _ref3.onReference,\n      onSelect = _ref3.onSelect,\n      range = _ref3.range,\n      referenceProp = _ref3.reference,\n      _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n      showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n      _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var announce = useContext(AnnounceContext);\n\n  var _useContext = useContext(MessageContext),\n      format = _useContext.format; // set activeDate when caller changes it, allows us to change\n  // it internally too\n\n\n  var _useState = useState(dateProp && typeof dateProp === 'string' && range ? activeDates.end : activeDates.start),\n      activeDate = _useState[0],\n      setActiveDate = _useState[1];\n\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]); // function that runs inside the useEffect for date and dates\n\n  var normalizeDate = function normalizeDate(dateValue) {\n    // convert values to UTC based on if date is string or array\n    if (typeof dateValue === 'string') {\n      return normalizeForTimezone(dateValue);\n    }\n\n    if (Array.isArray(dateValue)) {\n      if (Array.isArray(dateValue[0])) {\n        var from;\n        var to;\n\n        var _dateValue$0$map = dateValue[0].map(function (day) {\n          return day ? new Date(day) : undefined;\n        });\n\n        from = _dateValue$0$map[0];\n        to = _dateValue$0$map[1];\n        if (from) from = normalizeForTimezone(from, dateValue[0][0]);\n        if (to) to = normalizeForTimezone(to, dateValue[0][0]);\n        return [[from, to]];\n      }\n\n      var dateArray = [];\n      dateValue.forEach(function (d) {\n        if (Array.isArray(d)) {\n          var _from;\n\n          var _to;\n\n          var _d$map = d.map(function (day) {\n            return new Date(day);\n          });\n\n          _from = _d$map[0];\n          _to = _d$map[1];\n          _from = normalizeForTimezone(_from, d[0]);\n          _to = normalizeForTimezone(_to, d[0]);\n          dateArray.push([_from, _to]);\n        } else {\n          dateArray.push(normalizeForTimezone(d));\n        }\n      });\n      return dateArray;\n    }\n\n    return undefined;\n  }; // set date when caller changes it, allows us to change it internally too\n\n\n  var _useState2 = useState(dateProp),\n      date = _useState2[0],\n      setDate = _useState2[1];\n\n  useEffect(function () {\n    setDate(normalizeDate(dateProp));\n  }, [dateProp]); // set dates when caller changes it, allows us to change it internally too\n\n  var _useState3 = useState(datesProp),\n      dates = _useState3[0],\n      setDates = _useState3[1];\n\n  useEffect(function () {\n    setDates(normalizeDate(datesProp));\n  }, [datesProp]); // set reference based on what the caller passed or date/dates.\n\n  var _useState4 = useState(normalizeReference(referenceProp, date, dates)),\n      reference = _useState4[0],\n      setReference = _useState4[1];\n\n  useEffect(function () {\n    return setReference(normalizeReference(referenceProp, dateProp, datesProp));\n  }, [dateProp, datesProp, referenceProp]); // normalize bounds\n\n  var _useState5 = useState(boundsProp ? boundsProp.map(function (b) {\n    return normalizeForTimezone(b);\n  }) : undefined),\n      bounds = _useState5[0],\n      setBounds = _useState5[1];\n\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp.map(function (b) {\n      return normalizeForTimezone(b);\n    }));else setBounds(undefined);\n  }, [boundsProp]); // calculate the bounds we display based on the reference\n\n  var _useState6 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState6[0],\n      setDisplayBounds = _useState6[1];\n\n  var _useState7 = useState(),\n      targetDisplayBounds = _useState7[0],\n      setTargetDisplayBounds = _useState7[1];\n\n  var _useState8 = useState(),\n      slide = _useState8[0],\n      setSlide = _useState8[1];\n\n  var _useState9 = useState(),\n      animating = _useState9[0],\n      setAnimating = _useState9[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek); // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear) {\n          setDisplayBounds([targetDisplayBounds[0], displayBounds[1]]);\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear) {\n          setDisplayBounds([displayBounds[0], targetDisplayBounds[1]]);\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n\n      return undefined;\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]); // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [animating, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n\n  var _useState10 = useState(),\n      focus = _useState10[0],\n      setFocus = _useState10[1];\n\n  var _useState11 = useState(),\n      active = _useState11[0],\n      setActive = _useState11[1];\n\n  useEffect(function () {\n    if (initialFocus === 'days') daysRef.current.focus();\n  }, [initialFocus]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, bounds]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextDates;\n    var nextDate; // output date with no timestamp if that's how user provided it\n\n    var adjustedDate;\n\n    if (!range) {\n      nextDate = selectedDate;\n\n      if (datesProp) {\n        datesProp.forEach(function (d) {\n          if (!timeStamp.test(d)) {\n            adjustedDate = formatToLocalYYYYMMDD(nextDate);\n\n            if (d === adjustedDate) {\n              nextDate = undefined;\n            } else {\n              adjustedDate = undefined;\n            }\n          }\n        });\n      } else if (typeof dateProp === 'string') {\n        if (!timeStamp.test(dateProp)) {\n          adjustedDate = formatToLocalYYYYMMDD(selectedDate);\n\n          if (dateProp === adjustedDate) {\n            nextDate = undefined;\n          } else {\n            adjustedDate = undefined;\n          }\n        }\n      } else if (Array.isArray(dateProp)) {\n        dateProp.forEach(function (d) {\n          if (!timeStamp.test(d)) {\n            adjustedDate = formatToLocalYYYYMMDD(nextDate);\n\n            if (d === adjustedDate) {\n              nextDate = undefined;\n            } else {\n              adjustedDate = undefined;\n            }\n          }\n        });\n      } else {\n        adjustedDate = undefined;\n      }\n    } // everything down is a range\n    else if (!dates && !Array.isArray(date)) {\n      // if user supplies date, convert this into dates\n      if (date) {\n        var priorDate = new Date(date);\n        var selDate = new Date(selectedDate);\n\n        if (activeDate === activeDates.start) {\n          if (selDate.getTime() > priorDate.getTime()) {\n            nextDates = [[selectedDate, undefined]];\n          } else {\n            nextDates = [[selectedDate, date]];\n          }\n\n          setActiveDate(activeDates.end);\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } else if (activeDate === activeDates.end) {\n          if (selDate.getTime() < priorDate.getTime()) {\n            nextDates = [[selectedDate, undefined]];\n            setActiveDate(activeDates.end);\n          } else {\n            nextDates = [[date, selectedDate]];\n            setActiveDate(activeDates.start);\n          }\n\n          if (activeDateProp) setActiveDate(activeDateProp);\n        }\n      } else if (activeDate === activeDates.start) {\n        nextDates = [[selectedDate, undefined]];\n        setActiveDate(activeDates.end);\n      } else if (activeDate === activeDates.end) {\n        nextDates = [[undefined, selectedDate]];\n      }\n\n      if (activeDateProp) setActiveDate(activeDateProp);\n    } else if (dates || date) {\n      var handleSelection = function handleSelection(dateValue) {\n        var priorDates = dateValue[0].map(function (d) {\n          return new Date(d);\n        });\n        var selDate = new Date(selectedDate);\n\n        if (selDate.getTime() === priorDates[0].getTime()) {\n          nextDates = [[undefined, dateValue[0][1]]];\n          setActiveDate(activeDates.start);\n        } else if (selDate.getTime() === priorDates[1].getTime()) {\n          nextDates = [[dateValue[0][0], undefined]];\n          setActiveDate(activeDates.end);\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } else if (activeDate === activeDates.start) {\n          if (selDate.getTime() > priorDates[1].getTime()) {\n            nextDates = [[selectedDate, undefined]];\n          } else {\n            nextDates = [[selectedDate, dateValue[0][1]]];\n          }\n\n          setActiveDate(activeDates.end);\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } else if (activeDate === activeDates.end) {\n          if (selDate.getTime() < priorDates[0].getTime()) {\n            nextDates = [[selectedDate, undefined]];\n            setActiveDate(activeDates.end);\n          } else {\n            nextDates = [[dateValue[0][0], selectedDate]];\n            setActiveDate(activeDates.start);\n          }\n\n          if (activeDateProp) setActiveDate(activeDateProp);\n        } // cleanup\n\n\n        if (!nextDates[0][0] && !nextDates[0][1]) nextDates = undefined;\n      }; // have dates\n\n\n      if (dates) {\n        handleSelection(dates);\n      } else if (date && Array.isArray(date)) {\n        handleSelection(date);\n      }\n    }\n\n    setDates(nextDates);\n\n    if (date && typeof date === 'string') {\n      setDate(nextDate);\n    } else if (date && Array.isArray(date)) {\n      setDate(nextDates);\n    }\n\n    setActive(new Date(selectedDate));\n\n    if (onSelect) {\n      var adjustedDates;\n\n      if (nextDates && Array.isArray(nextDates[0]) && (!nextDates[0][0] || !nextDates[0][1]) && range === true) {\n        // return string for backwards compatibility\n        var _nextDates$0$filter = nextDates[0].filter(function (d) {\n          return d;\n        });\n\n        adjustedDates = _nextDates$0$filter[0];\n      } else {\n        adjustedDates = nextDates;\n      }\n\n      onSelect(adjustedDates || adjustedDate || nextDate);\n    }\n  }, [activeDate, activeDateProp, date, dateProp, dates, datesProp, onSelect, range]);\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: previousMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, bounds),\n      onClick: function onClick() {\n        changeReference(previousMonth);\n        announce(format({\n          id: 'calendar.previous',\n          messages: messages,\n          values: {\n            date: previousMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: nextMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, bounds),\n      onClick: function onClick() {\n        changeReference(nextMonth);\n        announce(format({\n          id: 'calendar.next',\n          messages: messages,\n          values: {\n            date: nextMonth.toLocaleDateString(locale, {\n              month: 'long',\n              year: 'numeric'\n            })\n          }\n        }));\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      (function () {\n        var dateString = day.toISOString(); // this.dayRefs[dateString] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || bounds && !betweenDates(day, bounds);\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateString;\n        }\n\n        if (!children) {\n          days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n            key: day.getTime(),\n            buttonProps: {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString);\n                announce(\"Selected \" + formatToLocalYYYYMMDD(dateString), 'assertive'); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            },\n            isInRange: inRange,\n            isSelected: selected,\n            otherMonth: day.getMonth() !== reference.getMonth(),\n            size: size,\n            fill: fill\n          }, day.getDate()));\n        } else {\n          days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n            key: day.getTime(),\n            buttonProps: onSelect ? {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString);\n                announce(\"Selected \\n                          \" + formatToLocalYYYYMMDD(dateString), 'assertive'); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            } : null,\n            size: size,\n            fill: fill\n          }, children({\n            date: day,\n            day: day.getDate(),\n            isInRange: inRange,\n            isSelected: selected\n          })));\n        }\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return active !== undefined ? selectDate(active.toISOString()) : undefined;\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n\n      if (!betweenDates(addDays(active, -7), displayBounds)) {\n        changeReference(addDays(active, -7));\n      }\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n\n      if (!betweenDates(addDays(active, 7), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onLeft: function onLeft() {\n      setActive(addDays(active, -1));\n\n      if (!betweenDates(addDays(active, -1), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onRight: function onRight() {\n      setActive(addDays(active, 1));\n\n      if (!betweenDates(addDays(active, 2), displayBounds)) {\n        changeReference(active);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    tabIndex: 0,\n    role: \"grid\",\n    \"aria-label\": \"\\n                \" + reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \";\\n                \" + getAccessibilityString(date, dates) + \"\\n              \",\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n\n      if (date && betweenDates(new Date(date), displayBounds)) {\n        setActive(new Date(date));\n      } else {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };"]},"metadata":{},"sourceType":"module"}